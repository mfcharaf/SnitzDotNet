(function(a){a.fn.extend({spellchecker:function(d,c){return this.each(function(){if(a(this).data("spellchecker")&&a(this).data("spellchecker")[d]){a(this).data("spellchecker")[d](c)}else{a(this).data("spellchecker",new b(this,(d&&d.constructor===Object)&&d||null));(d&&d.constructor==String)&&a(this).data("spellchecker")[d](c)}})}});var b=function(c,d){this.options=a.extend({url:"checkspelling.php",lang:"en",engine:"pspell",addToDictionary:false,wordlist:{action:"after",element:c},suggestBoxPosition:"below",innerDocument:true},d||{});this.$domObj=a(c);this.elements={};this.init()};b.prototype={init:function(){var c=this;this.createElements();this.$domObj.addClass("spellcheck-container");a(document).bind("click",function(d){(!a(d.target).hasClass("spellcheck-word-highlight")&&!a(d.target).parents().filter("#spellcheck-suggestbox").length)&&c.hideBox()})},check:function(c){var f=this,d=this.$domObj.get(0).nodeName,g="<[^>]+>",e="^[^a-zA-Z\\u00A1-\\uFFFF]|[^a-zA-Z\\u00A1-\\uFFFF]+[^a-zA-Z\\u00A1-\\uFFFF]|[^a-zA-Z\\u00A1-\\uFFFF]$|\\n|\\t|\\s{2,}";if(d=="TEXTAREA"||d=="INPUT"){this.type="textarea";var h=a.trim(this.$domObj.val().replace(new RegExp(g,"g"),"").replace(new RegExp(e,"g")," "))}else{this.type="html";var h=a.trim(this.$domObj.text().replace(new RegExp(e,"g")," "))}this.postJson(this.options.url,{text:encodeURIComponent(h).replace(/%20/g,"+")},function(i){f.type=="html"&&f.options.innerDocument?f.highlightWords(i,c):f.buildBadwordsBox(i,c)})},highlightWords:function(e,c){if(!e.length){c(true);return}var f=this,d=this.$domObj.html();a.each(e,function(g,h){d=d.replace(new RegExp("([^a-zA-Z\\u00A1-\\uFFFF])("+h+")([^a-zA-Z\\u00A1-\\uFFFF])","g"),'$1<span class="spellcheck-word-highlight">$2</span>$3')});this.$domObj.html(d).find(".spellcheck-word-highlight").click(function(){f.suggest(this)});(c)&&c()},buildBadwordsBox:function(d,c){if(!d.length){c(true);return}var e=this,f=[];if(!a("#spellcheck-badwords").length){a(this.options.wordlist.element)[this.options.wordlist.action](this.elements.$badwords)}else{this.elements.$badwords=a("#spellcheck-badwords")}this.elements.$badwords.empty();a.each(d,function(h,g){if(a.inArray(g,f)===-1){a('<span class="spellcheck-word-highlight">'+g+"</span>").click(function(){e.suggest(this)}).appendTo(e.elements.$badwords).after('<span class="spellcheck-sep">,</span> ');f.push(g)}});a(".spellcheck-sep:last",e.elements.$badwords).addClass("spellcheck-sep-last");(c)&&c()},suggest:function(f){var e=this,c=a(f),d=c.offset();this.$curWord=c;if(this.options.innerDocument){this.elements.$suggestBox=this.elements.$body.find("#spellcheck-suggestbox");this.elements.$suggestWords=this.elements.$body.find("#spellcheck-suggestbox-words");this.elements.$suggestFoot=this.elements.$body.find("#spellcheck-suggestbox-foot")}this.elements.$suggestFoot.hide();this.elements.$suggestBox.stop().hide().css({opacity:1,width:"auto",left:d.left+"px",top:(this.options.suggestBoxPosition=="above"?(d.top-(c.outerHeight()+10))+"px":(d.top+c.outerHeight())+"px")}).fadeIn(200);this.elements.$suggestWords.html("<em>Loading..</em>");this.postJson(this.options.url,{suggest:encodeURIComponent(a.trim(c.text()))},function(g){e.buildSuggestBox(g,d)})},buildSuggestBox:function(e,f){var g=this,c=this.$curWord;this.elements.$suggestWords.empty();for(var d=0;d<(e.length<5?e.length:5);d++){this.elements.$suggestWords.append(a('<a href="#">'+e[d]+"</a>").addClass((!d?"first":"")).click(function(){return false}).mousedown(function(i){i.preventDefault();g.replace(this.innerHTML);g.hideBox()}))}(!d)&&this.elements.$suggestWords.append("<em>(no suggestions)</em>");var h=window.innerHeight?window.innerHeight:a(window).height();this.elements.$suggestFoot.show();g.elements.$suggestBox.css({top:(this.options.suggestBoxPosition=="above")||(f.top+c.outerHeight()+this.elements.$suggestBox.outerHeight()>h+10)?(f.top-(this.elements.$suggestBox.height()+5))+"px":(f.top+c.outerHeight()+"px"),width:"auto",left:(this.elements.$suggestBox.outerWidth()+f.left>a("body").width()?(f.left-this.elements.$suggestBox.width())+c.outerWidth()+"px":f.left+"px")})},hideBox:function(c){this.elements.$suggestBox.fadeOut(250,function(){(c)&&c()})},replace:function(c){switch(this.type){case"textarea":this.replaceTextbox(c);break;case"html":this.replaceHtml(c);break}},replaceWord:function(d,c){return d.replace(new RegExp("([^a-zA-Z\\u00A1-\\uFFFF]?)("+this.$curWord.text()+")([^a-zA-Z\\u00A1-\\uFFFF]?)","g"),"$1"+c+"$3").replace(new RegExp("^("+this.$curWord.text()+")([^a-zA-Z\\u00A1-\\uFFFF])","g"),c+"$2").replace(new RegExp("([^a-zA-Z\\u00A1-\\uFFFF])("+this.$curWord.text()+")$","g"),"$1"+c)},replaceTextbox:function(c){this.removeBadword(this.$curWord);this.$domObj.val(this.replaceWord(this.$domObj.val(),c))},replaceHtml:function(c){var d=this.$domObj.find(".spellcheck-word-highlight:contains("+this.$curWord.text()+")");if(d.length){d.after(c).remove()}else{a(this.$domObj).html(this.replaceWord(a(this.$domObj).html(),c));this.removeBadword(this.$curWord)}},ignore:function(){if(this.type=="textarea"){this.removeBadword(this.$curWord)}else{this.$curWord.after(this.$curWord.html()).remove()}},ignoreAll:function(){var c=this;if(this.type=="textarea"){this.removeBadword(this.$curWord)}else{a(".spellcheck-word-highlight",this.$domObj).each(function(){(new RegExp(c.$curWord.text(),"i").test(this.innerHTML))&&a(this).after(this.innerHTML).remove()})}},removeBadword:function(c){(c.next().hasClass("spellcheck-sep"))&&c.next().remove();c.remove();if(!a(".spellcheck-sep",this.elements.$badwords).length){this.remove()}else{a(".spellcheck-sep:last",this.elements.$badwords).addClass("spellcheck-sep-last")}},addToDictionary:function(){var c=this;this.hideBox(function(){confirm('Are you sure you want to add the word "'+c.$curWord.text()+'" to the dictionary?')&&c.postJson(c.options.url,{addtodictionary:c.$curWord.text()},function(){c.ignoreAll();c.check()})})},remove:function(c){c=c||true;this.elements.$body.find(".spellcheck-word-highlight").each(function(){a(this).after(this.innerHTML).remove()});this.elements.$body.find("#spellcheck-badwords, #spellcheck-suggestbox-words, #spellcheck-suggestbox-foot, #spellcheck-suggestbox, #spellcheck-focus-helper").remove();a(this.domObj).removeClass("spellcheck-container");(c)&&a(this.domObj).data("spellchecker",null)},postJson:function(e,d,c){var f=a.ajax({type:"POST",url:e,data:a.extend(d,{engine:this.options.engine,lang:this.options.lang}),dataType:"json",cache:false,error:function(i,h,g){alert("Sorry, there was an error processing the request.")},success:function(g){(c)&&c(g)}});return f},createElements:function(){var c=this;this.elements.$body=this.options.innerDocument?this.$domObj.parents().filter("html:first").find("body"):a("body");this.remove(false);this.elements.$suggestWords=a('<div id ="spellcheck-suggestbox-words"></div>');this.elements.$ignoreWord=a('<a href="#">Ignore Word</a>').click(function(d){d.preventDefault();c.ignore();c.hideBox()});this.elements.$ignoreAllWords=a('<a href="#">Ignore all</a>').click(function(d){d.preventDefault();c.ignoreAll();c.hideBox()});this.elements.$ignoreWordsForever=a('<a href="#" title="ignore word forever (add to dictionary)">Ignore forever</a>').click(function(d){d.preventDefault();c.addToDictionary();c.hideBox()});this.elements.$suggestFoot=a('<div id="spellcheck-suggestbox-foot"></div>').append(this.elements.$ignoreWord).append(this.elements.$ignoreAllWords).append(this.options.engine=="pspell"&&c.options.addToDictionary?this.elements.$ignoreWordsForever:false);this.elements.$badwords=a('<div id="spellcheck-badwords"></div>');this.elements.$suggestBox=a('<div id="spellcheck-suggestbox"></div>').append(this.elements.$suggestWords).append(this.elements.$suggestFoot).prependTo(this.elements.$body)}}})(jQuery);(function($){$.fn.markItUp=function(settings,extraSettings){var method,params,options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=false;if(typeof settings=="string"){method=settings;params=extraSettings}options={id:"",nameSpace:"",root:"",previewHandler:false,previewInWindow:"",previewInElement:"",previewAutoRefresh:true,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:false,previewParserPath:"",previewParserVar:"data",resizeHandle:true,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]};$.extend(options,settings,extraSettings);if(!options.root){$("script").each(function(a,tag){miuScript=$(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);if(miuScript!==null){options.root=miuScript[1]}})}var uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};var matched=uaMatch(navigator.userAgent);var browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}return this.each(function(){var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this);textarea=this;levels=[];abort=false;scrollPosition=caretPosition=0;caretOffset=-1;options.previewParserPath=localize(options.previewParserPath);options.previewTemplatePath=localize(options.previewTemplatePath);if(method){switch(method){case"remove":remove();break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp")}return}function localize(data,inText){if(inText){return data.replace(/("|')~\//g,"$1"+options.root)}return data.replace(/^~\//,options.root)}function init(){id="";nameSpace="";if(options.id){id='id="'+options.id+'"'}else{if($$.attr("id")){id='id="markItUp'+($$.attr("id").substr(0,1).toUpperCase())+($$.attr("id").substr(1))+'"'}}if(options.nameSpace){nameSpace='class="'+options.nameSpace+'"'}$$.wrap("<div "+nameSpace+"></div>");$$.wrap("<div "+id+' class="markItUp"></div>');$$.wrap('<div class="markItUpContainer"></div>');$$.addClass("markItUpEditor");header=$('<div class="markItUpHeader"></div>').insertBefore($$);$(dropMenus(options.markupSet)).appendTo(header);footer=$('<div class="markItUpFooter"></div>').insertAfter($$);if(options.resizeHandle===true&&browser.safari!==true){resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",function(e){var h=$$.height(),y=e.clientY,mouseMove,mouseUp;mouseMove=function(e){$$.css("height",Math.max(20,e.clientY+h-y)+"px");return false};mouseUp=function(e){$("html").unbind("mousemove.markItUp",mouseMove).unbind("mouseup.markItUp",mouseUp);return false};$("html").bind("mousemove.markItUp",mouseMove).bind("mouseup.markItUp",mouseUp)});footer.append(resizeHandle)}$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed);$$.bind("insertion.markItUp",function(e,settings){if(settings.target!==false){get()}if(textarea===$.markItUp.focused){markup(settings)}});$$.bind("focus.markItUp",function(){$.markItUp.focused=this});if(options.previewInElement){refreshPreview()}}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;$("li:hover > ul",ul).css("display","block");$.each(markupSet,function(){var button=this,t="",title,li,j;title=(button.key)?(button.name||"")+" [Ctrl+"+button.key+"]":(button.name||"");key=(button.key)?'accesskey="'+button.key+'"':"";if(button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul)}else{i++;for(j=levels.length-1;j>=0;j--){t+=levels[j]+"-"}li=$('<li class="markItUpButton markItUpButton'+t+(i)+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",function(){return false}).bind("click.markItUp",function(e){e.preventDefault()}).bind("focusin.markItUp",function(){$$.focus()}).bind("mouseup",function(){if(button.call){eval(button.call)()}setTimeout(function(){markup(button)},1);return false}).bind("mouseenter.markItUp",function(){$("> ul",this).show();$(document).one("click",function(){$("ul ul",header).hide()})}).bind("mouseleave.markItUp",function(){$("> ul",this).hide()}).appendTo(ul);if(button.dropMenu){levels.push(i);$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu))}}});levels.pop();return ul}function magicMarkups(string){if(string){string=string.toString();string=string.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(x,a){var b=a.split("|!|");if(altKey===true){return(b[1]!==undefined)?b[1]:b[0]}else{return(b[1]===undefined)?"":b[0]}});string=string.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(x,a){var b=a.split(":!:");if(abort===true){return false}value=prompt(b[0],(b[1])?b[1]:"");if(value===null){abort=true}return value});return string}return""}function prepare(action){if($.isFunction(action)){action=action(hash)}return magicMarkups(action)}function build(string){var openWith=prepare(clicked.openWith);var placeHolder=prepare(clicked.placeHolder);var replaceWith=prepare(clicked.replaceWith);var closeWith=prepare(clicked.closeWith);var openBlockWith=prepare(clicked.openBlockWith);var closeBlockWith=prepare(clicked.closeBlockWith);var multiline=clicked.multiline;if(replaceWith!==""){block=openWith+replaceWith+closeWith}else{if(selection===""&&placeHolder!==""){block=openWith+placeHolder+closeWith}else{string=string||selection;var lines=[string],blocks=[];if(multiline===true){lines=string.split(/\r?\n/)}for(var l=0;l<lines.length;l++){line=lines[l];var trailingSpaces;if(trailingSpaces=line.match(/ *$/)){blocks.push(openWith+line.replace(/ *$/g,"")+closeWith+trailingSpaces)}else{blocks.push(openWith+line+closeWith)}}block=blocks.join("\n")}}block=openBlockWith+block+closeBlockWith;return{block:block,openBlockWith:openBlockWith,openWith:openWith,replaceWith:replaceWith,placeHolder:placeHolder,closeWith:closeWith,closeBlockWith:closeBlockWith}}function markup(button){var len,j,n,i;hash=clicked=button;get();$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:(selection||""),caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey});prepare(options.beforeInsert);prepare(clicked.beforeInsert);if((ctrlKey===true&&shiftKey===true)||button.multiline===true){prepare(clicked.beforeMultiInsert)}$.extend(hash,{line:1});if((ctrlKey===true&&shiftKey===true)){lines=selection.split(/\r?\n/);for(j=0,n=lines.length,i=0;i<n;i++){if($.trim(lines[i])!==""){$.extend(hash,{line:++j,selection:lines[i]});lines[i]=build(lines[i]).block}else{lines[i]=""}}string={block:lines.join("\n")};start=caretPosition;len=string.block.length+((browser.opera)?n-1:0)}else{if(ctrlKey===true){string=build(selection);start=caretPosition+string.openWith.length;len=string.block.length-string.openWith.length-string.closeWith.length;len=len-(string.block.match(/ $/)?1:0);len-=fixIeBug(string.block)}else{if(shiftKey===true){string=build(selection);start=caretPosition;len=string.block.length;len-=fixIeBug(string.block)}else{string=build(selection);start=caretPosition+string.block.length;len=0;start-=fixIeBug(string.block)}}}if((selection===""&&string.replaceWith==="")){caretOffset+=fixOperaBug(string.block);start=caretPosition+string.openBlockWith.length+string.openWith.length;len=string.block.length-string.openBlockWith.length-string.openWith.length-string.closeWith.length-string.closeBlockWith.length;caretOffset=$$.val().substring(caretPosition,$$.val().length).length;caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))}$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition});if(string.block!==selection&&abort===false){insert(string.block);set(start,len)}else{caretOffset=-1}get();$.extend(hash,{line:"",selection:selection});if((ctrlKey===true&&shiftKey===true)||button.multiline===true){prepare(clicked.afterMultiInsert)}prepare(clicked.afterInsert);prepare(options.afterInsert);if(previewWindow&&options.previewAutoRefresh){refreshPreview()}shiftKey=altKey=ctrlKey=abort=false}function fixOperaBug(string){if(browser.opera){return string.length-string.replace(/\n*/g,"").length}return 0}function fixIeBug(string){if(browser.msie){return string.length-string.replace(/\r*/g,"").length}return 0}function insert(block){if(document.selection){var newSelection=document.selection.createRange();newSelection.text=block}else{textarea.value=textarea.value.substring(0,caretPosition)+block+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}}function set(start,len){if(textarea.createTextRange){if(browser.opera&&browser.version>=9.5&&len==0){return false}range=textarea.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",len);range.select()}else{if(textarea.setSelectionRange){textarea.setSelectionRange(start,start+len)}}textarea.scrollTop=scrollPosition;textarea.focus()}function get(){textarea.focus();scrollPosition=textarea.scrollTop;if(document.selection){selection=document.selection.createRange().text;if(browser.msie){var range=document.selection.createRange(),rangeCopy=range.duplicate();rangeCopy.moveToElementText(textarea);caretPosition=-1;while(rangeCopy.inRange(range)){rangeCopy.moveStart("character");caretPosition++}}else{caretPosition=textarea.selectionStart}}else{caretPosition=textarea.selectionStart;selection=textarea.value.substring(caretPosition,textarea.selectionEnd)}return selection}function preview(){if(typeof options.previewHandler==="function"){previewWindow=true}else{if(options.previewInElement){previewWindow=$(options.previewInElement)}else{if(!previewWindow||previewWindow.closed){if(options.previewInWindow){previewWindow=window.open("","preview",options.previewInWindow);$(window).unload(function(){previewWindow.close()})}else{iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>');if(options.previewPosition=="after"){iFrame.insertAfter(footer)}else{iFrame.insertBefore(header)}previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]}}else{if(altKey===true){if(iFrame){iFrame.remove()}else{previewWindow.close()}previewWindow=iFrame=false}}}}if(!options.previewAutoRefresh){refreshPreview()}if(options.previewInWindow){previewWindow.focus()}}function refreshPreview(){renderPreview()}function renderPreview(){var phtml;if(options.previewHandler&&typeof options.previewHandler==="function"){options.previewHandler($$.val())}else{if(options.previewParser&&typeof options.previewParser==="function"){var data=options.previewParser($$.val());writeInPreview(localize(data,1))}else{if(options.previewParserPath!==""){$.ajax({type:"POST",dataType:"text",global:false,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(data){writeInPreview(localize(data,1))}})}else{if(!template){$.ajax({url:options.previewTemplatePath,dataType:"text",global:false,success:function(data){writeInPreview(localize(data,1).replace(/<!-- content -->/g,$$.val()))}})}}}}return false}function writeInPreview(data){if(options.previewInElement){$(options.previewInElement).html(data)}else{if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}previewWindow.document.open();previewWindow.document.write(data);previewWindow.document.close();previewWindow.document.documentElement.scrollTop=sp}}}function keyPressed(e){shiftKey=e.shiftKey;altKey=e.altKey;ctrlKey=(!(e.altKey&&e.ctrlKey))?(e.ctrlKey||e.metaKey):false;if(e.type==="keydown"){if(ctrlKey===true){li=$('a[accesskey="'+((e.keyCode==13)?"\\n":String.fromCharCode(e.keyCode))+'"]',header).parent("li");if(li.length!==0){ctrlKey=false;setTimeout(function(){li.triggerHandler("mouseup")},1);return false}}if(e.keyCode===13||e.keyCode===10){if(ctrlKey===true){ctrlKey=false;markup(options.onCtrlEnter);return options.onCtrlEnter.keepDefault}else{if(shiftKey===true){shiftKey=false;markup(options.onShiftEnter);return options.onShiftEnter.keepDefault}else{markup(options.onEnter);return options.onEnter.keepDefault}}}if(e.keyCode===9){if(shiftKey==true||ctrlKey==true||altKey==true){return false}if(caretOffset!==-1){get();caretOffset=$$.val().length-caretOffset;set(caretOffset,0);caretOffset=-1;return false}else{markup(options.onTab);return options.onTab.keepDefault}}}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor");$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$);$$.data("markItUp",null)}init()})};$.fn.markItUpRemove=function(){return this.each(function(){$(this).markItUp("remove")})};$.markItUp=function(settings){var options={target:false};$.extend(options,settings);if(options.target){return $(options.target).each(function(){$(this).focus();$(this).trigger("insertion",[options])})}else{$("textarea").trigger("insertion",[options])}}})(jQuery);miniSettings={nameSpace:"mini",markupSet:[{name:"Size",className:"fontsize",key:"S",openWith:"[size=[![Text size]!]]",closeWith:"[/size]",dropMenu:[{name:"Large",openWith:"[size=4]",closeWith:"[/size=4]"},{name:"Small",openWith:"[size=3]",closeWith:"[/size=3]"},{name:"x-Small",openWith:"[size=2]",closeWith:"[/size-2]"}]},{name:"Bold",key:"B",openWith:"[b]",closeWith:"[/b]"},{name:"Italic",key:"I",openWith:"[i]",closeWith:"[/i]"},{name:"Underline",key:"U",openWith:"[u]",closeWith:"[/u]"},{name:"StrikeThrough",className:"strike",key:"K",openWith:"[s]",closeWith:"[/s]"},{name:"Colors",className:"colors",openWith:"[color=[![Color]!]]",closeWith:"[/color]",dropMenu:[{name:"Yellow",openWith:"[yellow]",closeWith:"[/yellow]",className:"col1-1"},{name:"Gold",openWith:"[gold]",closeWith:"[/gold]",className:"col1-2"},{name:"Orange",openWith:"[orange]",closeWith:"[/orange]",className:"col1-3"},{name:"Red",openWith:"[red]",closeWith:"[/red]",className:"col1-4"},{name:"Purple",openWith:"[purple]",closeWith:"[/purple]",className:"col2-1"},{name:"Green",openWith:"[green]",closeWith:"[/green]",className:"col2-2"},{name:"White",openWith:"[white]",closeWith:"[/white]",className:"col2-3"},{name:"Gray",openWith:"[gray]",closeWith:"[/gray]",className:"col2-4"},{name:"Black",openWith:"[black]",closeWith:"[/black]",className:"col3-1"},{name:"Navy",openWith:"[navy]",closeWith:"[/navy]",className:"col3-2"},{name:"Blue",openWith:"[blue]",closeWith:"[/blue]",className:"col3-3"},{name:"Pink",openWith:"[pink]",closeWith:"[/pink]",className:"col3-4"}]},{separator:"---------------"},{name:"Left",openWith:"[left]",closeWith:"[/left]"},{name:"Center",openWith:"[center]",closeWith:"[/center]"},{name:"Right",openWith:"[right]",closeWith:"[/right]"},{name:"Direction",className:"textdir",openWith:"[(!(ltr|!|rtl)!)]",closeWith:"[/(!(ltr|!|rtl)!)]"},{separator:"---------------"},{name:"Bulleted list",openWith:"[*]",closeWith:"[/*]",multiline:true,openBlockWith:"[list]\n",closeBlockWith:"\n[/list]"},{name:"Numeric list",openWith:"[*]",closeWith:"[/*]",multiline:true,openBlockWith:"[list=[![Type:!:1]!],[![Starting number]!]]\n",closeBlockWith:"\n[/list=o]"},{name:"List item",openWith:"[*] ",closeWith:"[/*]"},{separator:"---------------"},{name:"Link",key:"L",className:"urllink",openWith:'(!([url]|!|[url="[![Url:!:http://]!]"])!)',closeWith:"[/url]"},{name:"Email",key:"E",className:"emaillink",openWith:'[mail="[![Email:!:mailto:]!]"]',closeWith:"[/mail]",placeHolder:"Text to display here..."},{separator:"---------------"},{name:"Spellcheck",className:"spellcheck",dropMenu:[{name:"English",beforeInsert:function(a){miuSpellchecker(a,"en")}},{name:"French",beforeInsert:function(a){miuSpellchecker(a,"fr")}},{name:"Dutch",beforeInsert:function(a){miuSpellchecker(a,"nl")}},{name:"German",beforeInsert:function(a){miuSpellchecker(a,"de")}}]}]};mySettings={nameSpace:"alloptions",previewInWindow:"width=700,height=550,resizable=yes,scrollbars=yes,directories=no,location=no,status=no,menubar=no",previewTemplatePath:"/scripts/templates/preview.html",markupSet:[{name:"Size",className:"fontsize",key:"S",openWith:"[size=[![Text size]!]]",closeWith:"[/size]",dropMenu:[{name:"Large",openWith:"[size=4]",closeWith:"[/size=4]"},{name:"Small",openWith:"[size=3]",closeWith:"[/size=3]"},{name:"x-Small",openWith:"[size=2]",closeWith:"[/size-2]"}]},{name:"Bold",key:"B",openWith:"[b]",closeWith:"[/b]"},{name:"Italic",key:"I",openWith:"[i]",closeWith:"[/i]"},{name:"Underline",key:"U",openWith:"[u]",closeWith:"[/u]"},{name:"StrikeThrough",className:"strike",key:"K",openWith:"[s]",closeWith:"[/s]"},{name:"Colors",className:"colors",openWith:"[color=[![Color]!]]",closeWith:"[/color]",dropMenu:[{name:"Yellow",openWith:"[yellow]",closeWith:"[/yellow]",className:"col1-1"},{name:"Gold",openWith:"[gold]",closeWith:"[/gold]",className:"col1-2"},{name:"Orange",openWith:"[orange]",closeWith:"[/orange]",className:"col1-3"},{name:"Red",openWith:"[red]",closeWith:"[/red]",className:"col1-4"},{name:"Purple",openWith:"[purple]",closeWith:"[/purple]",className:"col2-1"},{name:"Green",openWith:"[green]",closeWith:"[/green]",className:"col2-2"},{name:"White",openWith:"[white]",closeWith:"[/white]",className:"col2-3"},{name:"Gray",openWith:"[gray]",closeWith:"[/gray]",className:"col2-4"},{name:"Black",openWith:"[black]",closeWith:"[/black]",className:"col3-1"},{name:"Navy",openWith:"[navy]",closeWith:"[/navy]",className:"col3-2"},{name:"Blue",openWith:"[blue]",closeWith:"[/blue]",className:"col3-3"},{name:"Pink",openWith:"[pink]",closeWith:"[/pink]",className:"col3-4"}]},{separator:"---------------"},{name:"Left",openWith:"[left]",closeWith:"[/left]"},{name:"Center",openWith:"[center]",closeWith:"[/center]"},{name:"Right",openWith:"[right]",closeWith:"[/right]"},{name:"Direction",className:"textdir",openWith:"[(!(ltr|!|rtl)!)]",closeWith:"[/(!(ltr|!|rtl)!)]"},{separator:"---------------"},{name:"Bulleted list",openWith:"[*]",closeWith:"[/*]",multiline:true,openBlockWith:"[list]\n",closeBlockWith:"\n[/list]"},{name:"Numeric list",openWith:"[*]",closeWith:"[/*]",multiline:true,openBlockWith:"[list=[![Type:!:1]!],[![Starting number]!]]\n",closeBlockWith:"\n[/list=o]"},{name:"List item",openWith:"[*] ",closeWith:"[/*]"},{separator:"---------------"},{name:"Image tags",classname:"imagetag",key:"P",openWith:"(!([img]|!|[img][![Url:!:http://]!])!)",closeWith:"[/img]"},{name:"File Upload",className:"upload",call:"ShowUpload"},{name:"Browse Images",className:"browse",call:"ShowImageBrowser"},{name:"YouTube1",className:"youtube",openWith:'[video="[![YouTube video id]!]"]',closeWith:"[/video]",placeHolder:"Video Description"},{separator:"---------------"},{name:"Link",key:"L",className:"urllink",openWith:'(!([url]|!|[url="[![Url:!:http://]!]"])!)',closeWith:"[/url]"},{name:"Email",key:"E",className:"emaillink",openWith:'[mail="[![Email:!:mailto:]!]"]',closeWith:"[/mail]",placeHolder:"Text to display here..."},{separator:"---------------"},{name:"Quotes",className:"bbquote",openWith:"[quote]",closeWith:"[/quote]"},{name:"Code",openWith:"",closeWith:"",multiline:true,openBlockWith:"[code]\n",closeBlockWith:"\n[/code]"},{name:"Table",className:"bbtable",openWith:"[table]",closeWith:"[/table]",placeHolder:"[tr][(!(td|!|th)!)][/(!(td|!|th)!)][/tr]",dropMenu:[{name:"Row",openWith:"[tr]",closeWith:"[/tr]",placeHolder:"[(!(td|!|th)!)][/(!(td|!|th)!)]"},{name:"Column Td/Th",openWith:"[(!(td|!|th)!)]",closeWith:"[/(!(td|!|th)!)]"}]},{separator:"---------------"},{name:"Clean",className:"clean",replaceWith:function(a){return a.selection.replace(/\[(.*?)\]/g,"")}},{name:"Preview",className:"preview",call:"preview"},{name:"Spellcheck",className:"spellcheck",dropMenu:[{name:"English",beforeInsert:function(a){miuSpellchecker(a,"en")}},{name:"French",beforeInsert:function(a){miuSpellchecker(a,"fr")}},{name:"Dutch",beforeInsert:function(a){miuSpellchecker(a,"nl")}},{name:"German",beforeInsert:function(a){miuSpellchecker(a,"de")}}]}]};function miuSpellchecker(b,a){if($(b.textarea).hasClass("spellcheck-editor")){$(b.textarea).spellchecker("remove")}else{$(b.textarea).spellchecker({engine:"google",url:"~/JQuerySpellCheckerHandler.ashx",wordlist:{action:"after",element:".markItUpFooter"},lang:a,suggestBoxPosition:"above"}).spellchecker("check",function(c){if(c){$(b.textarea).spellchecker("remove");alert("There are no incorrectly spelt words.")}})}};